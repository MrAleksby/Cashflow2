@media (prefers-color-scheme: dark) {
    :root {
        --text-color: #e9ecef;
        --text-color-light: #adb5bd;
        --text-color-muted: #6c757d;
        --background-color: #1a1a1a;
        --card-background: #2d2d2d;
        --border-color: #495057;
        --border-color-light: #343a40;
        --shadow-color: rgba(0, 0, 0, 0.3);
        --shadow-color-hover: rgba(0, 0, 0, 0.4);
    }
    
    body { 
        background: var(--background-color); 
    }
    
    .container { 
        background: var(--card-background); 
        color: var(--text-color); 
    }
    
    .block { 
        background: var(--card-background); 
    }
    
    input, select, textarea {
        color: var(--text-color) !important;
        background: var(--card-background) !important;
        border-color: var(--border-color);
    }
    
    input::placeholder {
        color: #bbb !important;
    }
    
    #calc-display {
        color: #fff !important;
        background: #222 !important;
    }
    
    #summary-block, 
    #summary-block h2, 
    #summary-block span, 
    #summary-block div {
        color: #e9ecef !important;
    }
    
    #summary-block {
        background: linear-gradient(135deg, #2d2d2d, #3a3a3a) !important;
        border-color: rgba(156, 39, 176, 0.4) !important;
        box-shadow: 0 4px 12px rgba(156, 39, 176, 0.2) !important;
    }

    #summary-block span[style*="color: #7B1FA2"] {
        color: #BA68C8 !important;
    }

    #summary-block span[style*="color: #9C27B0"] {
        color: #E1BEE7 !important;
    }
    
    .modal-content {
        background: linear-gradient(145deg, #2d2d2d, #3a3a3a);
        color: var(--text-color);
        border-color: rgba(156, 39, 176, 0.3);
        box-shadow: 0 20px 40px rgba(156, 39, 176, 0.2), 0 8px 16px rgba(63, 81, 181, 0.15);
    }
    
    .close-btn {
        color: #9C27B0;
        background: linear-gradient(135deg, #3a3a3a, #4a4a4a);
        border: 2px solid rgba(156, 39, 176, 0.4);
    }

    .close-btn:hover {
        background: linear-gradient(135deg, #9C27B0, #7B1FA2);
        color: white;
        border-color: #7B1FA2;
    }
    
    .modal-form select,
    .modal-form input {
        background: var(--card-background);
        color: var(--text-color);
        border-color: var(--border-color);
    }

    /* Общие стили для всех списков активов в темном режиме */
    .asset-list,
    #business-list,
    #realestate-list,
    #stock-list,
    #preciousmetals-list,
    #misc-list {
        background: #222 !important;
        border-color: #444 !important;
    }
    
    /* Стили для списка активов в темном режиме */
    #business-list .asset-item,
    .asset-item,
    .stock-item,
    .realestate-item,
    .preciousmetals-item,
    .misc-item {
        background: #333 !important;
        color: #fff !important;
        border-color: #444 !important;
    }

    #business-list .asset-item:hover,
    .asset-item:hover,
    .stock-item:hover,
    .realestate-item:hover,
    .preciousmetals-item:hover,
    .misc-item:hover {
        background: #444 !important;
    }

    #business-list .asset-item.selected,
    .asset-item.selected,
    .stock-item.selected,
    .realestate-item.selected,
    .preciousmetals-item.selected,
    .misc-item.selected {
        background: #1a237e !important;
        border-color: #3f51b5 !important;
    }

    /* Стили для деталей всех активов в темном режиме */
    .business-details,
    .stock-details,
    .realestate-details,
    .preciousmetals-details,
    .misc-details,
    .selected-stock-info,
    .selected-asset-info {
        background: #333 !important;
        color: #fff !important;
        border-color: #444 !important;
    }

    .business-details p,
    .stock-details p,
    .realestate-details p,
    .preciousmetals-details p,
    .misc-details p,
    .info-row label {
        color: #fff !important;
    }

    .business-details span,
    .stock-details span,
    .realestate-details span,
    .preciousmetals-details span,
    .misc-details span {
        color: #bbb !important;
    }

    /* Стили для элементов управления покупкой/продажей в темном режиме */
    .sell-controls,
    .buy-controls,
    .stock-inputs,
    .business-inputs,
    .realestate-inputs,
    .precious-metal-inputs,
    .misc-inputs {
        background: #333 !important;
        border-color: #444 !important;
    }

    .sell-controls label,
    .buy-controls label,
    .stock-inputs label,
    .business-inputs label,
    .realestate-inputs label,
    .precious-metal-inputs label,
    .misc-inputs label {
        color: #fff !important;
    }

    .sell-controls input,
    .buy-controls input,
    .stock-inputs input,
    .business-inputs input,
    .realestate-inputs input,
    .precious-metal-inputs input,
    .misc-inputs input,
    .info-row input {
        background: #222 !important;
        color: #fff !important;
        border-color: #444 !important;
    }

    /* Стили для информации о сумме в темном режиме */
    .total-info,
    .total-price,
    .total-dividend {
        background: #333 !important;
        color: #fff !important;
        border-color: #444 !important;
    }

    .total-info p {
        color: #fff !important;
    }

    .total-info span,
    .profit-loss.positive {
        color: #4CAF50 !important;
    }

    .profit-loss.negative {
        color: #f44336 !important;
    }

    /* Стили для категорий активов в темном режиме */
    .category-card {
        background: var(--card-background) !important;
        border-color: var(--border-color) !important;
        color: var(--text-color) !important;
    }

    .category-card:hover {
        border-color: var(--primary-color) !important;
        box-shadow: var(--shadow-md) !important;
    }

    .category-card.active {
        border-color: var(--primary-color) !important;
        background: rgba(156, 39, 176, 0.1) !important;
    }

    .category-card p {
        color: var(--text-color-light) !important;
    }

    /* Стили для селекторов типа в темном режиме */
    .type-group {
        background: var(--card-background) !important;
        border-color: var(--border-color) !important;
    }

    .type-group h4 {
        color: var(--text-color) !important;
    }

    .type-btn {
        background: var(--card-background) !important;
        color: var(--text-color) !important;
        border-color: var(--border-color) !important;
    }

    .type-btn:hover {
        background: var(--border-color-light) !important;
    }
    
    #main-buy-dropdown, 
    #main-sell-dropdown, 
    #main-action-dropdown, 
    #main-stock-dropdown, 
    #main-action-sum-dropdown, 
    #main-action-regular-expense-dropdown {
        background: var(--card-background) !important;
        color: var(--text-color) !important;
        border-color: var(--primary-color) !important;
    }
    
    #main-buy-dropdown div, 
    #main-sell-dropdown div, 
    #main-action-dropdown div {
        background: var(--card-background) !important;
        color: var(--text-color) !important;
    }
    
    #main-buy-dropdown .main-buy-option, 
    #main-sell-dropdown .main-sell-option, 
    #main-action-dropdown .main-action-option {
        color: var(--primary-light) !important;
    }
} 